{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-center align-items-center mb-3">
    <h2>Parking Lots</h2>
    {% if current_user.admin %}
    <a href="{{url_for('create_parking_lot')}}" class="btn btn-dark ms-3">Add Parking Lot</a>
    {% endif %}
</div>

<!--search bar-->
<form method="GET" class = "mb-3">
    <input type="text" name="search" class="form-control" placeholder="Search by name or address" value="{{query}}"/>
</form>


<div class="table-responsive">
    <table class="table table-striped align-middle">
        <thead class="table-dark">
            <tr>
                <th scope="col">Parking Lot Name</th>
                <th scope="col">Address</th>
                <th scope="col">Pin Code</th>
                <th scope="col">Price Per Hour</th>
                <th scope="col">Maximum Spots</th>
                {% if current_user.admin %}
                <th scope="col" style="width: 160px">Action</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for parking_lot in parking_lots %}
            <tr>
                <td>{{parking_lot.name}}</td>
                <td>{{parking_lot.address}}</td>
                <td>{{parking_lot.pin_code}}</td>
                <td>{{parking_lot.price_per_hour}}</td>
                <td>{{parking_lot.maximum_spots}}</td>

                {% if current_user.admin %}
                <td>
                    <div class="d-flex gap-2">
                        <a href="{{url_for('edit_parking_lot', parking_lot_id = parking_lot.id)}}"
                            class="btn btn-sm btn-outline-primary">Edit</a>
                        <form method="POST" action="{{url_for('delete_parking_lot', parking_lot_id = parking_lot.id)}}"
                            onsubmit="return confirm('Are you sure you want to delete this parking lot?')">
                            <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
                        </form>
                    </div>
                </td>
                {% endif %}
            </tr>
            {% endfor %}
            {% if not parking_lots %}
            <tr>
                <td colspan="3">No Parking Lots Found</td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>
</div>
{% endblock %}